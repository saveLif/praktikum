version: '3.8'

services:

  node:
    image:  8e4601fe92a5
    ports:
      - "80:80"

    
  postgres:
    build: Datenbank
    environment:
      POSTGRES_USER: julian1234
      POSTGRES_PASSWORD: baum
      POSTGRES_DB: gruenflaeche
    ports:
      - "5432:5432"

  backend:
    build: backend
    hostname: backend
    ports:
      - "3000:5000"
      - "5000:5000"
    environment:
      PYTHONPATH: /app/Rest-API
    command: gunicorn --bind 0.0.0.0:5000 Rest-API.api:app


# services:
#   influxdb:
#     image: influxdb:2.7.3
#     volumes:
#       - influxdb-storage:/var/lib/influxdb2:rw
#     env_file:
#       - .env
#     entrypoint: ["./entrypoint.sh"]
#     restart: on-failure:10
#     ports:
#       - ${DOCKER_INFLUXDB_INIT_PORT}:8086

#   telegraf:
#     image: telegraf:1.19
#     volumes:
#       - ${TELEGRAF_CFG_PATH}:/etc/telegraf/telegraf.conf:rw
#     env_file:
#       - .env
#     depends_on:
#       - influxdb

#   grafana:
#     image: grafana/grafana-oss:8.4.3
#     volumes:
#       - grafana-storage:/var/lib/grafana:rw
#     depends_on:
#       - influxdb
#     ports:
#       - ${GRAFANA_PORT}:3000

# volumes:
#   grafana-storage:
#   influxdb-storage:
